/*!
 * Codestar WP Color Picker v1.1.0 - This is plugin for WordPress Color Picker Alpha Channel
 * Copyright 2015 Codestar <info@codestarthemes.com> - GNU GENERAL PUBLIC LICENSE (http://www.gnu.org/licenses/gpl-2.0.txt)
 */
!function($,document){"use strict";"undefined"!=typeof Color.fn.toString&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;0<=i;i--)hex="0"+hex;return"#"+hex}),$.cs_ParseColorValue=function(val){var value=val.replace(/\s+/g,""),alpha=-1!==value.indexOf("rgba")?parseFloat(100*value.replace(/^.*,(.+)\)/,"$1")):100;return{value:value,alpha:alpha,rgba:alpha<100}},$.fn.cs_wpColorPicker=function(){return this.each(function(){var $this=$(this);if(!1!==$this.data("rgba")){var picker=$.cs_ParseColorValue($this.val());$this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){var uiColorValue=ui.color.toString();$this.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",uiColorValue),$this.val(uiColorValue).trigger("change")},create:function(){var a8cIris=$this.data("a8cIris"),$container=$this.closest(".wp-picker-container"),$alphaWrap=$('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo($container.find(".wp-picker-holder")),$alphaSlider=$alphaWrap.find(".cs-alpha-slider"),$alphaText=$alphaWrap.find(".cs-alpha-text"),$alphaOffset=$alphaWrap.find(".cs-alpha-slider-offset");$alphaSlider.slider({slide:function(event,ui){var slideValue=parseFloat(ui.value/100);a8cIris._color._alpha=slideValue,$this.wpColorPicker("color",a8cIris._color.toString()),$alphaText.text(slideValue<1?slideValue:"")},create:function(){var slideValue=parseFloat(picker.alpha/100),alphaTextValue=slideValue<1?slideValue:"";$alphaText.text(alphaTextValue),$alphaOffset.css("background-color",picker.value),$container.on("click",".wp-picker-clear",function(){a8cIris._color._alpha=1,$alphaText.text(""),$alphaSlider.slider("option","value",100).trigger("slide")}),$container.on("click",".wp-picker-default",function(){var defaultPicker=$.cs_ParseColorValue($this.data("default-color")),defaultValue=parseFloat(defaultPicker.alpha/100),defaultText=defaultValue<1?defaultValue:"";a8cIris._color._alpha=defaultValue,$alphaText.text(defaultText),$alphaSlider.slider("option","value",defaultPicker.alpha).trigger("slide")}),$container.on("click",".wp-color-result",function(){$alphaWrap.toggle()}),$("body").on("click.wpcolorpicker",function(){$alphaWrap.hide()})},value:picker.alpha,step:1,min:1,max:100})}})}else $this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){$this.val(ui.color.toString()).trigger("change")}})})},$(document).ready(function(){$(".cs-wp-color-picker").cs_wpColorPicker()})}(jQuery,document);!function(window){"use strict";var hook={hooks:[],register:function(name,callback){"undefined"==typeof hook.hooks[name]&&(hook.hooks[name]=[]),hook.hooks[name].push(callback)},call:function(name,args){if("undefined"!=typeof hook.hooks[name])for(var i=0;i<hook.hooks[name].length;++i)if(!0!==hook.hooks[name][i](args))break}};window.hook=window.hook||hook}(window);!function($,document){"use strict";var model={init:function(){model.canvas={min:150,max:1350},model.mobile={minIn:100,maxIn:600,minOut:50,maxOut:750},hook.register("onStopSortingContactList",function(args){for(var e,cs=$(".mcb-contact-checkbox input:checked"),lis=$("#mobile-contact-bar-outer li"),i=0;i<cs.length;++i)e=$(cs[i]).closest("ul").find(".fa-stack").children().clone(),$(lis.get(i)).find(".fa-stack").empty().append(e);lis.find("i").removeClass("fa-lg").addClass("fa-fw"),lis.find(".mcb-badge").removeClass().addClass("mobile-contact-bar-badge"),model.update_badges()}),hook.register("onSelectIcon",function(args){$("#mobile-contact-bar-outer li:eq("+args.index+")").find("i").removeClass().addClass(args.icon+" fa-fw")}),hook.register("onDeleteContact",function(args){$("#mobile-contact-bar-outer li:eq("+args+")").remove(),model.update_icons_width(),model.update_icons_borders()}),model.onReady()},onReady:function(){model.dragvars={active:!1,dmy:0,dt:0,db:0},$("#mcb-model-mobile-draggable").mousedown(function(event){event.preventDefault(),event.stopPropagation();var ph=$("#mcb-model-placeholder").attr("height"),vp=$("#mcb-bar-vertical_position input:checked").val();model.dragvars.mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),model.dragvars.active=!0,model.dragvars.dmy=event.clientY-model.dragvars.mgt[2],"top"===vp?(model.dragvars.dt=-ph,model.dragvars.db=0):"bottom"===vp&&(model.dragvars.dt=0,model.dragvars.db=-ph)}).mousemove(function(event){event.preventDefault(),event.stopPropagation();var y=event.clientY-model.dragvars.dmy;model.dragvars.active&&model.mobile.minIn+model.dragvars.dt<=y&&y<=model.mobile.maxIn-model.dragvars.db&&$("#mcb-model-mobile-group").attr("transform","translate("+model.dragvars.mgt[1]+","+y+")")}).mouseup(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}).mouseleave(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}),$("#mcb-bar-color").on("input change",function(){$("#mobile-contact-bar-outer").css("background-color",this.value)}),$("#mcb-bar-opacity").on("input change",function(){$("#mobile-contact-bar").css("opacity",this.value)}),$("#mcb-bar-height").on("input",function(){var h=0<this.value?this.value:0;model.update_bar_height(h)}),$("#mcb-bar-width").on("input",function(){var w=100<this.value?100:this.value;$("#mobile-contact-bar").css("width",w+"%")}),$("#mcb-bar-horizontal_position input").on("change",model.update_bar_x),$("#mcb-bar-vertical_position input").on("change",function(){var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);mgt[2]<model.mobile.minIn?(mgt[2]=model.mobile.minIn,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")):mgt[2]>model.mobile.maxIn&&(mgt[2]=model.mobile.maxIn,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")),model.update_bar_y(),model.update_model_placeholder_y(),model.update_bar_borders()}),$("#mcb-bar-is_fixed").on("change",function(){model.update_bar()}),$("#mcb-bar-space_height").on("input",function(){model.update_bar_y()}),$("#mcb-bar-placeholder_height").on("input",function(){var ph=0<this.value?this.value:0;$("#mcb-model-placeholder").attr("height",ph),model.update_model_placeholder_y(),model.update_bar_y();var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),min=model.mobile.minIn-ph,max=model.mobile.maxIn+ +ph;mgt[2]<min?$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+min+")"):mgt[2]>max&&$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+max+")")}),$("#mcb-bar-placeholder_color").on("input change",function(){$("#mcb-model-placeholder").attr("fill",this.value)}),$("#mcb-bar-is_border input").on("change",function(){model.update_bar_borders(),model.update_bar_li_height()}),$("#mcb-bar-border_color").on("input change",function(){model.update_bar_borders()}),$("#mcb-bar-border_width").on("input",function(){model.update_bar_borders(),model.update_bar_li_height()}),$("#mcb-icons-size").on("change",function(){$(".mobile-contact-bar-fa-stack").removeClass().addClass("mobile-contact-bar-fa-stack fa-stack fa-"+this.value)}),$("#mcb-icons-color").on("input change",function(){$("#mobile-contact-bar ul li a").css("color",this.value),$("#mobile-contact-bar-toggle span").css("color",this.value)}),$("#mcb-icons-alignment input").on("change",function(){model.update_icons_width()}),$("#mcb-icons-width").on("input",function(){model.update_icons_width()}),$("#mcb-icons-is_border input").on("change",function(){model.update_icons_borders()}),$("#mcb-icons-border_color").on("input change",function(){model.update_icons_borders()}),$("#mcb-icons-border_width").on("input",function(){model.update_icons_borders()}),$("#mcb-badges-background_color").on("input change",function(){$(".mobile-contact-bar-badge").css("background-color",this.value)}),$("#mcb-badges-font_color").on("input change",function(){$(".mobile-contact-bar-badge").css("color",this.value)}),$("#mcb-badges-size").on("input change",function(){$(".mobile-contact-bar-badge").css("font-size",this.value+"em")}),$("#mcb-badges-corner input").on("change",function(){model.update_badges_corner()}),$("#mcb-toggle-is_render").on("change",function(){this.checked?$("#mobile-contact-bar-toggle").css("display","table"):$("#mobile-contact-bar-toggle").css("display","none")}),$("#mcb-table-contacts").on("change",".mcb-contact-checkbox input",function(){if(this.checked){var index=$(".mcb-contact-checkbox input:checked").index(this),l=$("#mobile-contact-bar-outer li:eq(0)").clone(),e=$(this).closest("ul").find(".fa-stack").children().clone();l.find(".fa-stack").empty().append(e),l.find("i").removeClass("fa-lg").addClass("fa-fw"),l.find(".mcb-badge").removeClass().addClass("mobile-contact-bar-badge"),0===index?$("#mobile-contact-bar-outer li:eq(0)").before(l):$("#mobile-contact-bar-outer li:eq("+(index-1)+")").after(l)}else{for(var n,cs=$(".mcb-contact-checkbox input:checked"),lis=$("#mobile-contact-bar-outer li"),cc=[],i=0;i<cs.length;++i)n=cs[i].name.replace("checked","icon"),cc.push($('input[name="'+n+'"]').val());for(var j=0;j<lis.length;++j)if(!$(lis[j]).find("i").hasClass(cc[j])){$(lis[j]).remove();break}}model.update_icons_borders(),model.update_icons_width(),model.update_badges()})},update_bar:function(){$("#mcb-bar-is_fixed").prop("checked")?$("#mcb-model-bar").detach().insertAfter("#mcb-model-mobile-draggable"):$("#mcb-model-bar").detach().insertAfter("#mcb-model-placeholder"),model.update_bar_y()},update_bar_height:function(height){$("#mcb-model-bar").attr("height",height),$("#mobile-contact-bar-outer").css("height",height),model.update_bar_li_height(),model.update_bar_y()},update_bar_y:function(){var f=$("#mcb-bar-is_fixed").prop("checked"),vp=$("#mcb-bar-vertical_position input:checked").val(),h=$("#mcb-model-bar").attr("height"),ph=$("#mcb-model-placeholder").attr("height"),sh=0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val():0;f?"top"===vp?$("#mcb-model-bar").attr("y",model.mobile.minOut+ +sh):"bottom"===vp&&$("#mcb-model-bar").attr("y",model.mobile.maxOut-h-sh):"top"===vp?$("#mcb-model-bar").attr("y",model.canvas.min-ph+ +sh):"bottom"===vp&&$("#mcb-model-bar").attr("y",model.canvas.max-h+ +ph-sh)},update_bar_x:function(){switch($("#mcb-bar-horizontal_position input:checked").val()){case"left":$("#mobile-contact-bar").css("left","0"),$("#mobile-contact-bar").css("-webkit-transform","unset"),$("#mobile-contact-bar").css("-ms-transform","unset"),$("#mobile-contact-bar").css("transform","unset");break;case"center":$("#mobile-contact-bar").css("left","50%"),$("#mobile-contact-bar").css("-webkit-transform","translateX(-50%)"),$("#mobile-contact-bar").css("-ms-transform","translateX(-50%)"),$("#mobile-contact-bar").css("transform","translateX(-50%)");break;case"right":$("#mobile-contact-bar").css("left","100%"),$("#mobile-contact-bar").css("-webkit-transform","translateX(-100%)"),$("#mobile-contact-bar").css("-ms-transform","translateX(-100%)"),$("#mobile-contact-bar").css("transform","translateX(-100%)")}},update_model_placeholder_y:function(){var vp=$("#mcb-bar-vertical_position input:checked").val(),ph=$("#mcb-model-placeholder").attr("height");"top"===vp?$("#mcb-model-placeholder").attr("y",model.canvas.min-ph):"bottom"===vp&&$("#mcb-model-placeholder").attr("y",model.canvas.max)},update_bar_borders:function(){var b=$("#mcb-bar-is_border input:checked").val(),vp=$("#mcb-bar-vertical_position input:checked").val(),bw=$("#mcb-bar-border_width").val()<0?0:$("#mcb-bar-border_width").val(),bc=$("#mcb-bar-border_color").val();switch(b){case"one":"top"===vp?($("#mobile-contact-bar-outer").css("border-top","none"),$("#mobile-contact-bar-outer").css("border-bottom",bw+"px solid "+bc)):"bottom"===vp&&($("#mobile-contact-bar-outer").css("border-top",bw+"px solid "+bc),$("#mobile-contact-bar-outer").css("border-bottom","none"));break;case"two":$("#mobile-contact-bar-outer").css("border-top",bw+"px solid "+bc),$("#mobile-contact-bar-outer").css("border-bottom",bw+"px solid "+bc);break;case"none":$("#mobile-contact-bar-outer").css("border-top","none"),$("#mobile-contact-bar-outer").css("border-bottom","none");break;default:$("#mobile-contact-bar-outer").css("border-top","none"),$("#mobile-contact-bar-outer").css("border-bottom","none")}},update_bar_li_height:function(){var b=$("#mcb-bar-is_border input:checked").val(),h=$("#mcb-bar-height").val(),bw=$("#mcb-bar-border_width").val()<0?0:$("#mcb-bar-border_width").val();switch(b){case"one":$("#mobile-contact-bar ul li").css("height",h-bw+"px");break;case"two":$("#mobile-contact-bar ul li").css("height",h-2*bw+"px");break;case"none":$("#mobile-contact-bar ul li").css("height",h+"px");break;default:$("#mobile-contact-bar ul li").css("height",h+"px")}},update_icons_width:function(){var a=$("#mcb-icons-alignment input:checked").val(),iw=$("#mcb-icons-width").val()<0?0:$("#mcb-icons-width").val(),cc=0<$(".mcb-contact-checkbox input:checked").length?$(".mcb-contact-checkbox input:checked").length:1;switch(a){case"centered":$("#mobile-contact-bar ul li").css("width",iw);break;case"justified":$("#mobile-contact-bar ul li").css("width",100/cc+"%");break;default:$("#mobile-contact-bar ul li").css("width",100/cc+"%")}},update_icons_borders:function(){var b=$("#mcb-icons-is_border input:checked").val(),bw=$("#mcb-icons-border_width").val()<0?0:$("#mcb-icons-border_width").val(),bc=$("#mcb-icons-border_color").val();switch(b){case"two":$("#mobile-contact-bar ul li").css("border-left",bw+"px solid "+bc),$("#mobile-contact-bar ul li").css("border-right","none"),$("#mobile-contact-bar ul li:last-child").css("border-right",bw+"px solid "+bc);break;case"four":$("#mobile-contact-bar ul li").css("border-top",bw+"px solid "+bc),$("#mobile-contact-bar ul li").css("border-bottom",bw+"px solid "+bc),$("#mobile-contact-bar ul li").css("border-left",bw+"px solid "+bc),$("#mobile-contact-bar ul li").css("border-right","none"),$("#mobile-contact-bar ul li:last-child").css("border-right",bw+"px solid "+bc);break;case"none":$("#mobile-contact-bar ul li").css("border-top","none"),$("#mobile-contact-bar ul li").css("border-bottom","none"),$("#mobile-contact-bar ul li").css("border-left","none"),$("#mobile-contact-bar ul li").css("border-right","none");break;default:$("#mobile-contact-bar ul li").css("border-top","none"),$("#mobile-contact-bar ul li").css("border-bottom","none"),$("#mobile-contact-bar ul li").css("border-left","none"),$("#mobile-contact-bar ul li").css("border-right","none")}},update_badges_corner:function(){switch($("#mcb-badges-corner input:checked").val()){case"top-right":$(".mobile-contact-bar-badge").css("top",0),$(".mobile-contact-bar-badge").css("right",0),$(".mobile-contact-bar-badge").css("bottom","auto"),$(".mobile-contact-bar-badge").css("left","auto");break;case"bottom-right":$(".mobile-contact-bar-badge").css("top","auto"),$(".mobile-contact-bar-badge").css("right",0),$(".mobile-contact-bar-badge").css("bottom",0),$(".mobile-contact-bar-badge").css("left","auto");break;case"bottom-left":$(".mobile-contact-bar-badge").css("top","auto"),$(".mobile-contact-bar-badge").css("right","auto"),$(".mobile-contact-bar-badge").css("bottom",0),$(".mobile-contact-bar-badge").css("left",0);break;case"top-left":$(".mobile-contact-bar-badge").css("top",0),$(".mobile-contact-bar-badge").css("right","auto"),$(".mobile-contact-bar-badge").css("bottom","auto"),$(".mobile-contact-bar-badge").css("left",0);break;default:$(".mobile-contact-bar-badge").css("top",0),$(".mobile-contact-bar-badge").css("right",0),$(".mobile-contact-bar-badge").css("bottom","auto"),$(".mobile-contact-bar-badge").css("left","auto")}},update_badges:function(){var bc=$("#mcb-badges-background_color").val(),c=$("#mcb-badges-font_color").val(),fs=$("#mcb-badges-size").val();$(".mobile-contact-bar-badge").css("background-color",bc),$(".mobile-contact-bar-badge").css("color",c),$(".mobile-contact-bar-badge").css("font-size",fs+"em"),model.update_badges_corner()}};$(document).ready(model.init)}(jQuery,document);!function($,document){"use strict";$.fn.addClassOdd=function(klass){return this.each(function(){$(this).removeClass(klass)}).filter(function(index){return index%2==1}).addClass(klass),this},$.fn.setId=function(id,rowType){var name,pattern="["+rowType+"][]",replacement="["+rowType+"]["+id+"]";return $(this).find("input, select, textarea").each(function(){name=$(this).attr("name"),$(this).attr("name",name.replace(pattern,replacement))}),this},$.fn.setActiveContact=function(checked){return checked?$(this).closest("tr").removeClass("mcb-odd").addClass("mcb-active"):$(this).closest("tr").removeClass("mcb-active"),this},$.fn.toggleAriaExpanded=function(){return this.attr("aria-expanded",function(index,attr){return"true"===attr?"false":"true"}),this},$.fn.initSettings=function(){var tbody=this,operators={"<":function(x,y){return Number(x)<Number(y[0])},"==":function(x,y){return x===y[0]},"!=":function(x,y){return x!==y[0]},"|==":function(x,y){return x===y[0]||x===y[1]}};return tbody.children(".mcb-child").each(function(){for(var parent,self=this,classes=self.classList,i=0;i<classes.length;i++)if(classes[i].startsWith("mcb-parent-")){var tmp=classes[i].split("--");parent=tmp[0].replace("parent","setting"),parent=tbody.children("."+parent);var match=tmp[1].match(/^([^a-zA-Z0-9]+)(.+)$/),operator=match[1],operands=match[2].split(","),value=""+parent.find("input").getValue();operators[operator](value,operands)?$(self).fadeIn(500):$(self).fadeOut(500),parent.find("input, option").on("change input",function(){value=""+$(this).getValue(),operators[operator](value,operands)?$(self).fadeIn(500):$(self).fadeOut(500)})}}),this},$.fn.sortableContacts=function(){var allParameters;return $(this).sortable({connectWith:"#mcb-table-contacts tbody",handle:".mcb-contact-icon",items:".mcb-contact",start:function(event,ui){ui.placeholder.height(ui.item.height()),(allParameters=$(this).children(".mcb-parameter")).addClass("hidden").detach(),$(this).children(".mcb-contact").each(function(){$(this).find(".mcb-row-toggle-parameters").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down")})},stop:function(){var contactId;$(this).children(".mcb-contact").each(function(){contactId=$(this).attr("data-contact-id"),allParameters.filter(function(i,parameter){return contactId===$(parameter).attr("data-contact-id")}).insertAfter($(this))}),allParameters=null,$(this).children(".mcb-contact").addClassOdd("mcb-odd"),hook.call("onStopSortingContactList")}}),this},$.fn.initContacts=function(){var contactId,parameter;return this.children(".mcb-contact").each(function(index){$(this).attr("data-contact-id",index)}),this.children(".mcb-parameter").each(function(index){parameter=$(this),contactId=parameter.prevAll("tr.mcb-contact").first().attr("data-contact-id"),parameter.attr("data-contact-id",contactId).attr("data-parameter-id",index).prevAll('.mcb-contact[data-contact-id="'+contactId+'"]').find(".mcb-row-toggle-parameters").removeClass("mcb-invisible")}),this.sortableContacts(),this},$.fn.getValue=function(){var value="";switch(this.attr("type")){case"number":value=this.val();break;case"checkbox":value=this.prop("checked");break;case"radio":value=this.filter(":checked").val();break;case"select":value=this.filter(":selected").val()}return value},$.fn.maxId=function(rowType){var id=-1,attr="data-"+rowType+"-id";return 0===this.length||this.each(function(){id=Math.max(id,$(this).attr(attr))}),id};var option={init:function(){option.tbody=$("#mcb-table-contacts tbody"),postboxes.add_postbox_toggles(pagenow),$(".mcb-settings tbody").each(function(){$(this).initSettings()}),option.tbody.initContacts(),option.onReady()},onReady:function(){$(".mcb-settings").on("input change",".mcb-slider-input",function(){$(this).next("span").html(this.value)}),$(".mcb-settings").on("change","#mcb-badges-corner input",function(){var corner=$("#mcb-badges-corner input:checked").val();$("#mcb-table-contacts").find(".mcb-badge").removeClass("mcb-badge-top-right mcb-badge-bottom-right mcb-badge-bottom-left mcb-badge-top-left").addClass("mcb-badge-"+corner)}),$("#mcb-table-contacts thead").on({mouseenter:function(){$(this).removeClass("wp-ui-text-highlight").addClass("wp-ui-highlight")},mouseleave:function(){$(this).removeClass("wp-ui-highlight").addClass("wp-ui-text-highlight")}},".mcb-action"),option.tbody.on("change",".mcb-contact-checkbox input",function(){$(this).setActiveContact(this.checked)}),option.tbody.on("click",".mcb-row-toggle-parameters",function(event){event.preventDefault(),event.stopPropagation();var button=$(this).children("i"),contact=button.closest("tr"),contactId=contact.attr("data-contact-id"),parameters=option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]');parameters.toggleClass("hidden"),button.toggleAriaExpanded().toggleClass("fa-caret-up fa-caret-down"),"true"===button.attr("aria-expanded")?parameters.first().find(".mcb-parameter-value input, .mcb-parameter-value textarea").focus():contact.find(".mcb-contact-uri input").focus()}),option.tbody.on("click",".mcb-row-delete-contact",function(event){event.preventDefault(),event.stopPropagation();var contactId=$(this).closest("tr").attr("data-contact-id"),checkbox=$(this).closest("tr").find(".mcb-contact-checkbox input");if(checkbox.prop("checked")){var index=$(".mcb-contact-checkbox input:checked").index(checkbox);hook.call("onDeleteContact",index)}option.tbody.children('[data-contact-id="'+contactId+'"]').remove(),option.tbody.children(".mcb-contact").addClassOdd("mcb-odd")}),option.tbody.on("click",".mcb-row-delete-parameter",function(event){event.preventDefault(),event.stopPropagation();var contactId=$(this).closest("tr").attr("data-contact-id");$(this).closest("tr").remove(),0===option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]').length&&option.tbody.find('.mcb-contact[data-contact-id="'+contactId+'"]').find(".mcb-row-toggle-parameters").addClass("mcb-invisible").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down")}),option.tbody.on("click",".mcb-row-add-parameter",function(event){event.preventDefault(),event.stopPropagation();var contact=$(this).closest(".mcb-contact"),parameter=$($.parseHTML($("#mcb-tmpl-parameter").html().replace(/\s{2,}/g,""))),contactId=contact.attr("data-contact-id"),parameters=option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]'),parameterId=parameters.maxId("parameter")+1;contact.find(".mcb-row-toggle-parameters").removeClass("mcb-invisible").children("i").attr("aria-expanded","true").addClass("fa-caret-up").removeClass("fa-caret-down"),0===parameters.length?contact.after(parameter):(parameters.removeClass("hidden"),parameters.last().after(parameter)),parameter.attr("data-contact-id",contactId).attr("data-parameter-id",parameterId).setId(contactId,"contacts").setId(parameterId,"parameters").find(".mcb-parameter-key").focus()}),option.tbody.on("click",".mcb-row-pick-icon",function(event){var list;event.preventDefault(),event.stopPropagation(),setTimeout(function(){$("#mcb-icon-picker-container div input").focus()},100);var button=$(this),offset=button.offset(),contact=button.closest("tr").addClass("mcb-overlay");$($.parseHTML($("#mcb-tmpl-icon-picker").html().replace(/\s{2,}/g,""))).css({top:offset.top-12,left:offset.left-160}).appendTo("body").show(),list=$("#mcb-icon-picker-container ul"),$("body").off("click","#mcb-icon-picker-container ul li a").on("click","#mcb-icon-picker-container ul li a",function(event){event.preventDefault(),event.stopPropagation();var icon=$(this).children().attr("class"),checkbox=contact.find(".mcb-contact-checkbox input");if(contact.find(".mcb-contact-icon i").removeClass().addClass(icon+" fa-lg").end().find('input[name$="[icon]"]').val(icon).end().removeClass("mcb-overlay"),$("#mcb-icon-picker-container").remove(),contact.removeClass("mcb-warning"),checkbox.prop("checked")){var index=$(".mcb-contact-checkbox input:checked").index(checkbox);hook.call("onSelectIcon",{index:index,icon:icon})}}),$("body").off("click","#mcb-icon-picker-container div a").on("click","#mcb-icon-picker-container div a",function(event){event.preventDefault(),event.stopPropagation(),"back"===$(this).attr("data-direction")?list.find("li:gt("+(list.children().length-26)+")").prependTo(list):list.find("li:lt(30)").appendTo(list)}),$("body").off("input","#mcb-icon-picker-container div input").on("input","#mcb-icon-picker-container div input",function(event){event.preventDefault(),event.stopPropagation();var search=$(this).val();""===search?list.find("li:lt(30)").show():(list.children().not('[data-icon*="'+search+'"]').hide(),list.children('[data-icon*="'+search+'"]').show())}),$(document).off("mouseup").on("mouseup",function(event){event.preventDefault(),event.stopPropagation(),$("#mcb-icon-picker-container").is(event.target)||0!==$("#mcb-icon-picker-container").has(event.target).length||($("#mcb-icon-picker-container").remove(),contact.removeClass("mcb-overlay"))})}),$("#mcb-integration-icons .mcb-action, #mcb-integration-buttons .mcb-action").click(function(event){event.preventDefault(),event.stopPropagation();var contactType=$(this).attr("data-contact-type"),contactId=option.tbody.children(".mcb-contact").maxId("contact")+1,thead=$("#mcb-table-contacts thead");$.ajax({url:ajaxurl,method:"POST",data:{action:"ajax_add_contact",nonce:mobile_contact_bar.nonce,contact_type:contactType},beforeSend:function(){var position=thead.position(),overlay=$("<tr>",{class:"mcb-overlay"});overlay.css({position:"absolute",top:position.top,left:position.left,height:thead.height(),width:thead.width()}),thead.prepend(overlay)}}).done(function(response){if(!response)return!1;var data=JSON.parse(response);if(!data.hasOwnProperty("contact"))return!1;var contact=$($.parseHTML(data.contact)[0]);if(contact.attr("data-contact-id",contactId).setId(contactId,"contacts"),option.tbody.prepend(contact),option.tbody.sortableContacts().children(".mcb-contact").addClassOdd("mcb-odd"),data.hasOwnProperty("parameters")){var parameter;contact.find(".mcb-row-add-parameter").addClass("mcb-invisible").end().find(".mcb-row-toggle-parameters").removeClass("mcb-invisible").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down");for(var i=data.parameters.length-1;-1<i;i--)(parameter=$(data.parameters[i])).attr("data-contact-id",contactId).attr("data-parameter-id",i).setId(contactId,"contacts").setId(i,"parameters"),contact.after(parameter)}}).always(function(){thead.find(".mcb-overlay").remove()})})}};$(document).ready(option.init)}(jQuery,document);